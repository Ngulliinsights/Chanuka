# Visual Consolidation Map

## Current State vs. Target State

### 1. Analytics & Monitoring Consolidation

```
BEFORE (Fragmented):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ features/analytics/                                         â”‚
â”‚ â”œâ”€â”€ hooks/ (7 files)                                        â”‚
â”‚ â”œâ”€â”€ model/ (5 files) â† error-analytics-bridge.ts HERE     â”‚
â”‚ â”œâ”€â”€ services/ (3 files)                                     â”‚
â”‚ â””â”€â”€ ui/                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ infrastructure/analytics/                                    â”‚
â”‚ â”œâ”€â”€ AnalyticsIntegration.tsx                               â”‚
â”‚ â”œâ”€â”€ AnalyticsProvider.tsx                                  â”‚
â”‚ â”œâ”€â”€ comprehensive-tracker.ts                               â”‚
â”‚ â”œâ”€â”€ data-retention-service.ts                              â”‚
â”‚ â””â”€â”€ service.ts                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ infrastructure/monitoring/                                   â”‚
â”‚ â”œâ”€â”€ cross-system-error-analytics.ts                        â”‚
â”‚ â”œâ”€â”€ error-aggregation-service.ts                           â”‚
â”‚ â”œâ”€â”€ error-monitor.ts                                        â”‚
â”‚ â”œâ”€â”€ performance-monitor.ts                                  â”‚
â”‚ â””â”€â”€ 7 more files...                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ features/monitoring/                                         â”‚
â”‚ â””â”€â”€ model/ (6 performance files)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER (Unified):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ infrastructure/observability/                                â”‚
â”‚ â”œâ”€â”€ analytics/                                              â”‚
â”‚ â”‚   â”œâ”€â”€ core/                                               â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ analytics-service.ts (MERGED)                  â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ tracker.ts (MERGED)                            â”‚
â”‚ â”‚   â”‚   â””â”€â”€ provider.tsx (MERGED)                          â”‚
â”‚ â”‚   â”œâ”€â”€ features/                                           â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ error-analytics.ts â† MOVED FROM features/      â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ user-journey.ts                                â”‚
â”‚ â”‚   â”‚   â””â”€â”€ web-vitals.ts                                  â”‚
â”‚ â”‚   â””â”€â”€ hooks/ (re-exports)                                â”‚
â”‚ â”œâ”€â”€ monitoring/                                             â”‚
â”‚ â”‚   â”œâ”€â”€ error/                                              â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ aggregation.ts (MERGED)                        â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ monitor.ts (MERGED)                            â”‚
â”‚ â”‚   â”‚   â””â”€â”€ cross-system-analytics.ts                      â”‚
â”‚ â”‚   â”œâ”€â”€ performance/                                        â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ monitor.ts (MERGED from 2 locations)           â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ benchmarking.ts                                â”‚
â”‚ â”‚   â”‚   â””â”€â”€ regression-testing.ts                          â”‚
â”‚ â”‚   â””â”€â”€ dashboards/                                         â”‚
â”‚ â””â”€â”€ types/                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BENEFITS:
âœ“ Single source of truth
âœ“ Clear separation: analytics vs monitoring
âœ“ Eliminates 15+ duplicate files
âœ“ Easier to maintain and extend
```

### 2. Error Handling Consolidation

```
BEFORE (Scattered):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ infrastructure/error/ (30+ files)                            â”‚
â”‚ â”œâ”€â”€ components/ (11 files)                                   â”‚
â”‚ â”œâ”€â”€ messages/ (6 files)                                      â”‚
â”‚ â”œâ”€â”€ middleware/ (5 files)                                    â”‚
â”‚ â”œâ”€â”€ reporters/ (4 files)                                     â”‚
â”‚ â””â”€â”€ 10 root files                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ lib/design-system/interactive/                               â”‚
â”‚ â”œâ”€â”€ errors.ts â† DUPLICATE                                    â”‚
â”‚ â”œâ”€â”€ recovery.ts â† DUPLICATE                                  â”‚
â”‚ â””â”€â”€ validation.ts â† DUPLICATE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ lib/ui/dashboard/                                            â”‚
â”‚ â”œâ”€â”€ errors.ts â† DUPLICATE                                    â”‚
â”‚ â”œâ”€â”€ recovery.ts â† DUPLICATE                                  â”‚
â”‚ â””â”€â”€ validation.ts â† DUPLICATE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ lib/ui/navigation/                                           â”‚
â”‚ â”œâ”€â”€ errors.ts â† DUPLICATE                                    â”‚
â”‚ â”œâ”€â”€ recovery.ts â† DUPLICATE                                  â”‚
â”‚ â””â”€â”€ validation.ts â† DUPLICATE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ lib/ui/loading/                                              â”‚
â”‚ â”œâ”€â”€ errors.ts â† DUPLICATE                                    â”‚
â”‚ â”œâ”€â”€ recovery.ts â† DUPLICATE                                  â”‚
â”‚ â””â”€â”€ validation.ts â† DUPLICATE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER (Unified):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ infrastructure/error-handling/                               â”‚
â”‚ â”œâ”€â”€ core/                                                     â”‚
â”‚ â”‚   â”œâ”€â”€ error-classes.ts (SINGLE SOURCE)                    â”‚
â”‚ â”‚   â”œâ”€â”€ error-factory.ts                                     â”‚
â”‚ â”‚   â”œâ”€â”€ error-handler.ts                                     â”‚
â”‚ â”‚   â””â”€â”€ error-types.ts                                       â”‚
â”‚ â”œâ”€â”€ boundaries/                                              â”‚
â”‚ â”‚   â”œâ”€â”€ error-boundary.tsx                                   â”‚
â”‚ â”‚   â”œâ”€â”€ community-error-boundary.tsx                         â”‚
â”‚ â”‚   â””â”€â”€ unified-error-boundary.tsx                           â”‚
â”‚ â”œâ”€â”€ recovery/                                                â”‚
â”‚ â”‚   â”œâ”€â”€ recovery-strategies.ts (MERGED ALL)                 â”‚
â”‚ â”‚   â”œâ”€â”€ recovery-manager.tsx                                 â”‚
â”‚ â”‚   â””â”€â”€ recovery-ui.tsx                                      â”‚
â”‚ â”œâ”€â”€ reporting/                                               â”‚
â”‚ â”‚   â””â”€â”€ reporters/ (4 files)                                 â”‚
â”‚ â”œâ”€â”€ messages/ (4 files)                                      â”‚
â”‚ â”œâ”€â”€ middleware/ (4 files)                                    â”‚
â”‚ â”œâ”€â”€ validation/                                              â”‚
â”‚ â”‚   â”œâ”€â”€ validators.ts (MERGED ALL)                          â”‚
â”‚ â”‚   â””â”€â”€ schemas.ts                                           â”‚
â”‚ â””â”€â”€ ui/ (3 files)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BENEFITS:
âœ“ Eliminates 12+ duplicate files
âœ“ Single error handling strategy
âœ“ Consistent error UX
âœ“ Centralized configuration
```

### 3. Type System Consolidation

```
BEFORE (Scattered):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ client/src/lib/types/                                        â”‚
â”‚ â”œâ”€â”€ bill/ (5 files) â† DUPLICATE                             â”‚
â”‚ â”œâ”€â”€ community/ (4 files) â† DUPLICATE                        â”‚
â”‚ â”œâ”€â”€ dashboard/ (5 files)                                     â”‚
â”‚ â””â”€â”€ 15 root files                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ client/src/infrastructure/api/types/                         â”‚
â”‚ â”œâ”€â”€ bill.ts â† DUPLICATE                                      â”‚
â”‚ â”œâ”€â”€ community.ts â† DUPLICATE                                 â”‚
â”‚ â”œâ”€â”€ auth.ts                                                  â”‚
â”‚ â””â”€â”€ 12 more files                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ client/src/features/*/types.ts                              â”‚
â”‚ â””â”€â”€ (20+ scattered type files)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER (Unified):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ shared/types/                                                â”‚
â”‚ â”œâ”€â”€ domain/                                                   â”‚
â”‚ â”‚   â”œâ”€â”€ bill.ts (MERGED from 2 locations)                   â”‚
â”‚ â”‚   â”œâ”€â”€ community.ts (MERGED from 2 locations)              â”‚
â”‚ â”‚   â”œâ”€â”€ user.ts                                              â”‚
â”‚ â”‚   â””â”€â”€ sponsor.ts                                           â”‚
â”‚ â”œâ”€â”€ infrastructure/                                          â”‚
â”‚ â”‚   â”œâ”€â”€ api/                                                 â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ request.ts                                       â”‚
â”‚ â”‚   â”‚   â”œâ”€â”€ response.ts                                      â”‚
â”‚ â”‚   â”‚   â””â”€â”€ error-response.ts                                â”‚
â”‚ â”‚   â”œâ”€â”€ cache.ts                                             â”‚
â”‚ â”‚   â””â”€â”€ performance.ts                                       â”‚
â”‚ â”œâ”€â”€ ui/                                                       â”‚
â”‚ â”‚   â”œâ”€â”€ components.ts (MERGED)                               â”‚
â”‚ â”‚   â”œâ”€â”€ dashboard.ts (MERGED)                                â”‚
â”‚ â”‚   â””â”€â”€ navigation.ts                                        â”‚
â”‚ â””â”€â”€ features/                                                â”‚
â”‚     â”œâ”€â”€ analytics.ts                                          â”‚
â”‚     â””â”€â”€ search.ts                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BENEFITS:
âœ“ Shared between client & server
âœ“ Eliminates 30+ duplicate definitions
âœ“ Single source of truth for domain models
âœ“ Better type consistency
```

## Dependency Flow (Target Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APP LAYER                            â”‚
â”‚                                                              â”‚
â”‚  client/src/app/                                            â”‚
â”‚  â”œâ”€â”€ providers/                                             â”‚
â”‚  â””â”€â”€ shell/                                                 â”‚
â”‚                                                              â”‚
â”‚  Entry point, app composition, routing                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FEATURES LAYER                          â”‚
â”‚                                                              â”‚
â”‚  client/src/features/                                       â”‚
â”‚  â”œâ”€â”€ bills/                                                 â”‚
â”‚  â”œâ”€â”€ community/                                             â”‚
â”‚  â”œâ”€â”€ analytics/                                             â”‚
â”‚  â””â”€â”€ ...                                                    â”‚
â”‚                                                              â”‚
â”‚  Business logic, feature-specific code                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LIB LAYER                             â”‚
â”‚                                                              â”‚
â”‚  client/src/lib/                                            â”‚
â”‚  â”œâ”€â”€ design-system/  (UI components)                       â”‚
â”‚  â”œâ”€â”€ hooks/          (Reusable hooks)                      â”‚
â”‚  â””â”€â”€ ui/             (Complex UI patterns)                 â”‚
â”‚                                                              â”‚
â”‚  Reusable, feature-agnostic code                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  INFRASTRUCTURE LAYER                        â”‚
â”‚                                                              â”‚
â”‚  client/src/infrastructure/                                 â”‚
â”‚  â”œâ”€â”€ observability/  (analytics + monitoring)              â”‚
â”‚  â”œâ”€â”€ error-handling/ (unified error system)                â”‚
â”‚  â”œâ”€â”€ api/            (HTTP clients)                        â”‚
â”‚  â”œâ”€â”€ auth/           (authentication)                      â”‚
â”‚  â”œâ”€â”€ store/          (state management)                    â”‚
â”‚  â””â”€â”€ ...                                                    â”‚
â”‚                                                              â”‚
â”‚  Cross-cutting concerns, technical infrastructure          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SHARED LAYER                            â”‚
â”‚                                                              â”‚
â”‚  shared/                                                     â”‚
â”‚  â”œâ”€â”€ types/          (Domain models, shared types)         â”‚
â”‚  â”œâ”€â”€ constants/      (App-wide constants)                  â”‚
â”‚  â”œâ”€â”€ utils/          (Pure utility functions)              â”‚
â”‚  â””â”€â”€ i18n/           (Translations)                        â”‚
â”‚                                                              â”‚
â”‚  Code shared between client & server                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RULES:
âœ“ Lower layers can be imported by upper layers
âœ— Upper layers CANNOT be imported by lower layers
âœ— Features CANNOT import from other features
âœ“ Infrastructure can be used by features and lib
âœ“ Shared can be used by everyone
```

## File Movement Priority Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HIGH IMPACT                              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   HIGH PRIORITY      â”‚  â”‚   MEDIUM PRIORITY    â”‚       â”‚
â”‚  â”‚                      â”‚  â”‚                      â”‚       â”‚
â”‚  â”‚ â€¢ Error Handling     â”‚  â”‚ â€¢ API Clients        â”‚       â”‚
â”‚  â”‚ â€¢ Type System        â”‚  â”‚ â€¢ State Management   â”‚       â”‚
â”‚  â”‚ â€¢ Analytics/Monitor  â”‚  â”‚ â€¢ Design System      â”‚       â”‚
â”‚  â”‚                      â”‚  â”‚                      â”‚       â”‚
â”‚  â”‚ DO FIRST (Week 1-2)  â”‚  â”‚ DO SECOND (Week 3-4) â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    LOW IMPACT                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   MEDIUM PRIORITY    â”‚  â”‚   LOW PRIORITY       â”‚       â”‚
â”‚  â”‚                      â”‚  â”‚                      â”‚       â”‚
â”‚  â”‚ â€¢ Feature Restructureâ”‚  â”‚ â€¢ Documentation      â”‚       â”‚
â”‚  â”‚ â€¢ Admin/Auth         â”‚  â”‚ â€¢ Archive Cleanup    â”‚       â”‚
â”‚  â”‚ â€¢ Dashboard          â”‚  â”‚ â€¢ Shared Expansion   â”‚       â”‚
â”‚  â”‚                      â”‚  â”‚                      â”‚       â”‚
â”‚  â”‚ DO THIRD (Week 5-6)  â”‚  â”‚ DO LAST (Week 7-8)   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Import Path Transformation Examples

### Before Consolidation:
```typescript
// âŒ Deep, inconsistent paths
import { ErrorBoundary } from '../../../infrastructure/error/components/ErrorBoundary';
import { useAnalytics } from '../../features/analytics/hooks/useAnalytics';
import { analyticsService } from '../../infrastructure/analytics/service';
import { errorAnalyticsBridge } from '../../features/analytics/model/error-analytics-bridge';
import { Bill } from '../../../lib/types/bill/bill-base';
import { BillService } from '../../../infrastructure/api/types/bill';
```

### After Consolidation:
```typescript
// âœ… Clean, consistent paths with barrel exports
import { ErrorBoundary } from '@/infrastructure/error-handling';
import { useAnalytics } from '@/infrastructure/observability/analytics';
import { Bill } from '@shared/types/domain';
import { useBills } from '@/features/bills';
```

## Metrics Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONSOLIDATION METRICS                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Files Eliminated:                                          â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 100+ files       â”‚
â”‚                                                              â”‚
â”‚  Duplicate Code Reduction:                                  â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%               â”‚
â”‚                                                              â”‚
â”‚  Import Path Depth:                                         â”‚
â”‚  Before: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (avg 6 levels)                       â”‚
â”‚  After:  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ (avg 2 levels)                       â”‚
â”‚                                                              â”‚
â”‚  Type Safety Score:                                         â”‚
â”‚  Before: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 40%               â”‚
â”‚  After:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 90%               â”‚
â”‚                                                              â”‚
â”‚  Developer Onboarding Time:                                 â”‚
â”‚  Before: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (2 weeks)                    â”‚
â”‚  After:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ (3 days)                     â”‚
â”‚                                                              â”‚
â”‚  Build Time:                                                â”‚
â”‚  Before: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (45s)                            â”‚
â”‚  After:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ (28s)                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Quick Decision Tree

```
                    Where should this file go?
                              â”‚
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Is it a domain type â”‚
                    â”‚ or shared constant? â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                   â”‚
                   YES                 NO
                    â”‚                   â”‚
                    â†“                   â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ shared/types/â”‚   â”‚ Is it technical  â”‚
            â”‚ or shared/   â”‚   â”‚ infrastructure?  â”‚
            â”‚ constants/   â”‚   â”‚ (API, auth, etc) â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                   â”‚
                             YES                 NO
                              â”‚                   â”‚
                              â†“                   â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ infrastructure/  â”‚  â”‚ Is it a reusable â”‚
                    â”‚ {concern}/       â”‚  â”‚ UI component or  â”‚
                    â”‚                  â”‚  â”‚ hook?            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚                   â”‚
                                        YES                 NO
                                         â”‚                   â”‚
                                         â†“                   â†“
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ lib/design-      â”‚  â”‚ It's feature-    â”‚
                              â”‚ system/ or       â”‚  â”‚ specific!        â”‚
                              â”‚ lib/hooks/       â”‚  â”‚ features/{name}/ â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color-Coded Priority Map

```
ğŸ”´ CRITICAL - Do First (Week 1-2)
â”œâ”€â”€ Error Handling Consolidation
â”œâ”€â”€ Type System Migration
â””â”€â”€ Analytics & Monitoring Merge

ğŸŸ¡ HIGH - Do Second (Week 3-4)
â”œâ”€â”€ API Client Architecture
â”œâ”€â”€ State Management Reorganization
â””â”€â”€ Design System Cleanup

ğŸŸ¢ MEDIUM - Do Third (Week 5-6)
â”œâ”€â”€ Admin Feature Restructure
â”œâ”€â”€ Auth Feature Restructure
â””â”€â”€ Dashboard Consolidation

ğŸ”µ LOW - Do Last (Week 7-8)
â”œâ”€â”€ Documentation Consolidation
â”œâ”€â”€ Archive Cleanup
â””â”€â”€ Shared Layer Expansion
```

## Success Indicators

```
âœ“ All error handling imports point to single location
âœ“ No duplicate type definitions
âœ“ Analytics and monitoring unified under observability
âœ“ Import paths max 2-3 levels deep
âœ“ All features follow FSD structure
âœ“ Zero circular dependencies
âœ“ Build time reduced by 30%+
âœ“ Type coverage above 90%
âœ“ Developer onboarding under 1 week
âœ“ Documentation up-to-date and consolidated
```

---

**Visual Guide Version:** 1.0
**Last Updated:** February 24, 2026
**Companion Document:** STRATEGIC_ARCHITECTURE_ANALYSIS.md
