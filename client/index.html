<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Chanuka Legislative Transparency Platform</title>
    <meta
      name="description"
      content="A comprehensive legislative transparency platform providing access to bill information, sponsorship analysis, community input, and expert verification for informed civic engagement."
    />

    <!-- PWA Configuration -->
    <link rel="manifest" href="/manifest.webmanifest" />
    <meta name="theme-color" content="#3b82f6" />
    <meta name="msapplication-TileColor" content="#3b82f6" />
    <meta name="msapplication-starturl" content="/" />
    <meta name="msapplication-config" content="/browserconfig.xml" />

    <!-- Apple PWA Configuration -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <!-- Enhanced Mobile Configuration -->
    <meta
      name="format-detection"
      content="telephone=no, date=no, email=no, address=no"
    />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="HandheldFriendly" content="true" />
    <meta name="MobileOptimized" content="width" />
    <meta name="apple-mobile-web-app-orientation" content="portrait" />
    <meta name="apple-mobile-web-app-title" content="Chanuka Platform" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/apple-touch-icon-152x152.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/apple-touch-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/apple-touch-icon-120x120.png"
    />

    <!-- Favicon Configuration -->
    <link rel="icon" type="image/svg+xml" href="/symbol.svg" />
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="/symbol.svg" />
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="/symbol.svg" />
    <link rel="shortcut icon" href="/symbol.svg" />

    <!-- Performance Optimizations -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Vite handles preloading automatically - removed manual preloads to prevent warnings -->

    <!-- Security Headers - CSP is now set via HTTP headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta
      http-equiv="Referrer-Policy"
      content="strict-origin-when-cross-origin"
    />

    <!-- Social Media Meta Tags -->
    <meta
      property="og:title"
      content="Chanuka Legislative Transparency Platform"
    />
    <meta
      property="og:description"
      content="A comprehensive legislative transparency platform for informed civic engagement"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://chanuka-platform.com/" />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="Chanuka Legislative Transparency Platform Logo"
    />
    <meta property="og:site_name" content="Chanuka Platform" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card Configuration -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Chanuka Legislative Transparency Platform"
    />
    <meta
      name="twitter:description"
      content="A comprehensive legislative transparency platform for informed civic engagement"
    />
    <meta name="twitter:image" content="/twitter-card.png" />
    <meta
      name="twitter:image:alt"
      content="Chanuka Legislative Transparency Platform"
    />

    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow" />
    <meta name="author" content="Chanuka Platform Team" />
    <meta name="generator" content="Vite + React + TypeScript" />
    <link rel="canonical" href="https://chanuka-platform.com/" />

    <!-- Structured Data for Better SEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Chanuka Legislative Transparency Platform",
        "description": "A comprehensive legislative transparency platform providing access to bill information, sponsorship analysis, community input, and expert verification for informed civic engagement.",
        "url": "https://chanuka-platform.com/",
        "applicationCategory": "GovernmentApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "creator": {
          "@type": "Organization",
          "name": "Chanuka Platform Team"
        }
      }
    </script>
  </head>
  <body>
    <!-- Skip navigation link for accessibility -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-50 focus:bg-blue-600 focus:text-white focus:px-4 focus:py-2 focus:rounded"
    >
      Skip to main content
    </a>

    <!-- Main application container -->
    <div
      id="root"
      role="application"
      aria-label="Chanuka Legislative Transparency Platform"
      class="min-h-screen"
    ></div>

    <!-- Simple preload cleanup to prevent warnings -->
    <script>
      // Simple preload cleanup to prevent unused resource warnings
      setTimeout(() => {
        const preloadLinks = document.querySelectorAll('link[rel="preload"], link[rel="prefetch"], link[rel="modulepreload"]');
        preloadLinks.forEach(link => {
          const href = link.getAttribute('href');
          if (href && !document.querySelector(`script[src="${href}"], link[href="${href}"][rel="stylesheet"]`)) {
            // Check if resource was actually used
            const resourceUsed = performance.getEntriesByName(href).length > 0;
            if (!resourceUsed) {
              console.debug('Removing unused preload:', href);
              link.remove();
            }
          }
        });
      }, 5000); // Check after 5 seconds
    </script>

    <!-- Main application script -->
    
    <!-- Error Suppression for Development -->
    <script>
      // Suppress extension errors early
      window.addEventListener('error', (e) => {
        const msg = e.message || '';
        const filename = e.filename || '';
        
        if (msg.includes('chrome-extension://') || 
            msg.includes('gpcWindowSetting.js') ||
            filename.includes('chrome-extension://') ||
            msg.includes('message channel closed')) {
          e.preventDefault();
          console.debug('[Extension] Suppressed:', msg);
          return false;
        }
      }, true);
      
      // Suppress promise rejections from extensions
      window.addEventListener('unhandledrejection', (e) => {
        const reason = String(e.reason || '');
        if (reason.includes('chrome-extension://') ||
            reason.includes('message channel closed')) {
          e.preventDefault();
          console.debug('[Extension] Suppressed rejection:', reason);
          return false;
        }
      }, true);
    </script>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Service Worker Registration - DISABLED FOR DEVELOPMENT -->
    <script>
      // Service worker disabled for development stability
      // Unregister any existing service workers
      (function() {
        try {
          if ("serviceWorker" in navigator) {
            navigator.serviceWorker.getRegistrations().then(regs => {
              regs.forEach(r => {
                r.unregister();
                console.log('Unregistered service worker:', r.scope);
              });
            }).catch(() => {});
          }
        } catch (e) {
          console.warn('Service worker cleanup failed', e);
        }
      })();
    </script>

    <!-- Fallback for JavaScript disabled -->
    <noscript>
      <div
        style="
          text-align: center;
          padding: 2rem;
          font-family: system-ui, sans-serif;
        "
      >
        <h1>JavaScript Required</h1>
        <p>
          This application requires JavaScript to function properly. Please
          enable JavaScript in your browser settings.
        </p>
      </div>
    </noscript>
  </body>
</html>
